/* LayoutMode v0.0.1, @license MIT */
!function(e,n){"function"==typeof define&&define.amd?define(n):e.LayoutMode=n()}(this,function(){"use strict"
var e=function(e){return document.querySelectorAll(e)},n=window.addEventListener,t=JSON.stringify,r=function(e){return"function"==typeof e}
return{init:function(o,i,d,s){var a=document.body.classList,l=o.constructor!==Array,u=l?o:{},c=l?u.modes:o,v=(l?u.classPrefix:i)||"mode-",f=(l?u.selectorClass:d)||"css-layout-mode-selector",y=(l?u.divPrefix:s)||"mode-",h={},g="body > ."+f,m=function(){for(var n=[],t=e(g+" div"),r=0;r<t.length;r++){var o=t[r]
if("none"!==getComputedStyle(o,null).display){var i=o.textContent
n.includes(i)||n.push(i)}}return n.sort(),n},p=function(){for(var e=[],n=0;n<a.length;n++){var t=a[n]
0===t.indexOf(v)&&e.push(t.substr(v.length))}return e.sort(),e},w=function(){var e=m(),n=p()
if(n.length==e.length&&(0==n.length||n[0]==e[0])&&t(n)==t(e))return!1
for(var r=0;r<n.length;r++)a.remove(v+n[r])
for(var r=0;r<e.length;r++)a.add(v+e[r])
n=p()
for(var o in h)h[o](n)},b=function(n){for(var t=e(g+" div"),r=0;r<t.length;r++){var o=t[r],i=o.textContent
o.style.display=n.includes(i)?"block":"none"}w()},E=window.dispatchEvent,M=function(n){for(var t=e(g+" div"),o=0;o<t.length;o++){t[o].style.display=""}if(r(Event))E(new Event("resize"))
else{var i=document.createEvent("UIEvents")
i.initUIEvent("resize",!0,!1,window,0),E(i)}},x=function(e,n){var t=r(e)?"nn"+Math.random():e,o=r(n)?n:e
return h[t]=o,L},C=function(e){var n=null
if("string"==typeof e)n=e
else{var n=null
for(var t in h)callback===e&&(n=t)}return n||delete h[n],L}
!function(e){var n=e||function(e){document.write(e)}
n('<div class="'+f+'">')
for(var t=0;t<c.length;t++){var r=c[t]
n('<div class="'+y+r+'">'+r+"</div>")}n("</div>"),n("<style>"),n("body > ."+f+" { visibility: hidden; }"),n("body > ."+f+" > div { display: none; }"),n("</style>")}(),n("DOMContentLoaded",w),n("load",w),n("resize",w)
var L={currentModes:p,changeModes:b,clearModes:M,selector:g,watch:x,unwatch:C}
return L}}})
